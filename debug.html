<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Support Network - Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { margin: 5px; padding: 10px; }
        pre { background: #f4f4f4; padding: 10px; border: 1px solid #ddd; }
        .section { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Mental Health Support Network - API Debug</h1>

    <div class="section">
        <h2>Services</h2>
        <button onclick="getServices()">Get All Services</button>
        <button onclick="getServiceById()">Get Service by ID</button>
        <input type="text" id="serviceId" placeholder="Service ID" value="1">
        <pre id="servicesOutput"></pre>
    </div>

    <div class="section">
        <h2>Bookings</h2>
        <button onclick="createBooking()">Create Booking</button>
        <button onclick="getBookings()">Get All Bookings</button>
        <pre id="bookingsOutput"></pre>
    </div>

    <div class="section">
        <h2>Users</h2>
        <button onclick="registerUser()">Register User</button>
        <button onclick="loginUser()">Login User</button>
        <button onclick="getUsers()">Get All Users</button>
        <pre id="usersOutput"></pre>
    </div>

    <div class="section">
        <h2>Posts</h2>
        <button onclick="getPosts()">Get All Posts</button>
        <button onclick="createPost()">Create Post</button>
        <pre id="postsOutput"></pre>
    </div>

    <div class="section">
        <h2>Forums</h2>
        <button onclick="getForums()">Get All Forums</button>
        <pre id="forumsOutput"></pre>
    </div>

    <div class="section">
        <h2>Resources</h2>
        <button onclick="getResources()">Get All Resources</button>
        <pre id="resourcesOutput"></pre>
    </div>

    <script>
        const baseURL = 'http://localhost:8000/api';

        async function apiCall(endpoint, method = 'GET', body = null) {
            const options = { method };
            if (body) {
                options.headers = { 'Content-Type': 'application/json' };
                options.body = JSON.stringify(body);
            }
            try {
                const response = await fetch(`${baseURL}${endpoint}`, options);
                const data = await response.json();
                return { status: response.status, data };
            } catch (error) {
                return { error: error.message };
            }
        }

        async function getServices() {
            const result = await apiCall('/services');
            document.getElementById('servicesOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getServiceById() {
            const id = document.getElementById('serviceId').value;
            const result = await apiCall(`/services/${id}`);
            document.getElementById('servicesOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function createBooking() {
            const booking = {
                serviceId: 1,
                userId: 1,
                date: '2023-12-01',
                time: '10:00',
                notes: 'Test booking'
            };
            const result = await apiCall('/bookings', 'POST', booking);
            document.getElementById('bookingsOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getBookings() {
            const result = await apiCall('/bookings');
            document.getElementById('bookingsOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function registerUser() {
            const user = {
                name: 'Test User',
                email: 'test@example.com',
                password: 'password123'
            };
            const result = await apiCall('/auth/register', 'POST', user);
            document.getElementById('usersOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function loginUser() {
            const credentials = {
                email: 'test@example.com',
                password: 'password123'
            };
            const result = await apiCall('/auth/login', 'POST', credentials);
            document.getElementById('usersOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getUsers() {
            const result = await apiCall('/users');
            document.getElementById('usersOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getPosts() {
            const result = await apiCall('/posts');
            document.getElementById('postsOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function createPost() {
            const post = {
                title: 'Test Post',
                content: 'This is a test post',
                userId: 1
            };
            const result = await apiCall('/posts', 'POST', post);
            document.getElementById('postsOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getForums() {
            const result = await apiCall('/forums');
            document.getElementById('forumsOutput').textContent = JSON.stringify(result, null, 2);
        }

        async function getResources() {
            const result = await apiCall('/resources');
            document.getElementById('resourcesOutput').textContent = JSON.stringify(result, null, 2);
        }
    </script>
</body>
</html>
